<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<p><a href="#span">span</a></p>
<p><a href="#p">p</a></p>
<p><a href="#div">div</a></p>
<p><a href="#a">a</a></p>
<p><a href="#button">button</a></p>
<p><a href="#text">text</a></p>
<p><a href="#select">select</a></p>
<p><a href="#textarea">textarea</a></p>

<div style="height: 2000px;"></div>

<span id="span">span</span>
<p id="p">p</p>
<div id="div">div</div>
<p><a id="a" href="">aaaa</a></p>
<p><input id="button" type="button" value="button"></p>
<p><input id="text" type="text" value="text"></p>
<select id="select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>
<p>
<textarea id="textarea" style="width: 300px; height: 100px; "></textarea>
</p>
<div style="height: 2000px;"></div>
<a href="#" style="position: fixed; right: 50px; bottom: 50px; font-size: 16px;">TOP</a>

<script type="text/javascript">
    (function () {

var fixedJumpLink = function () {
    var el, hash = location.hash.substr(1);
    if (hash == '') {
        return;
    }
    el = document.getElementById(hash);
    if (!/^(a|input|button|select|textarea)$/i.test(el.tagName)) {
        el.tabIndex = -1;
    }
    el.focus();
}

//浏览器版本是否低于IE8
var lessThenIE8 = function () {
    var UA = navigator.userAgent,
            isIE = UA.indexOf('MSIE') > -1,
            v = isIE ? /\d+/.exec(UA.split(';')[1]) : 'no ie';
    return v < 8;
}();

if (lessThenIE8) {
    var oldHash = location.hash.substr(1);
    (function () {
        var newHash = location.hash.substr(1);
        if (oldHash != newHash) {
            oldHash = newHash;
            fixedJumpLink();
        }
        setTimeout(arguments.callee, 0);
    })();
} else {
    window.onhashchange = fixedJumpLink;
}
    })();
</script>
</body>
</html>
