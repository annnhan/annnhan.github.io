<!DOCTYPE html>
<html>
<head>
    <script src="https://og6593g2z.qnssl.com/fundebug.0.3.3.min.js" apikey="e4ebd1d8446798b665fed4258ebd75f1ee7489bda0832a94b9d5f2a6d07d2f4b"></script>
    <meta charset="utf-8">
    
    <title>
        
        发布grunt-cptpl插件 |
        
        安·记</title>
    <script>
        if (location.host.indexOf('cssha.com') >= 0) {
            location.href = location.href.replace('cssha.com', 'annn.me');
        }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta property="wb:webmaster" content="35db845a3f9d1692"/>
    <meta name="baidu-site-verification" content="VdeWu2EHCz"/>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache, must-revalidate">
    <meta name="description" content="view on Github：https://github.com/hanan198501/grunt-cptplgrunt-cptpl插件可以将您的文本模板文件编译成javascript文件。在前端开发的时候，模板文本我们一般存放在一个隐藏dom节点，再通过javascript去获取这个节点的内容，将其编译。或者在写javascript的时候，我们手动通过拼接字符串的方式储存模板文本。grunt">
<meta name="keywords" content="grunt">
<meta property="og:type" content="article">
<meta property="og:title" content="发布grunt-cptpl插件">
<meta property="og:url" content="http://annn.me/grunt-cptpl/index.html">
<meta property="og:site_name" content="安·记">
<meta property="og:description" content="view on Github：https://github.com/hanan198501/grunt-cptplgrunt-cptpl插件可以将您的文本模板文件编译成javascript文件。在前端开发的时候，模板文本我们一般存放在一个隐藏dom节点，再通过javascript去获取这个节点的内容，将其编译。或者在写javascript的时候，我们手动通过拼接字符串的方式储存模板文本。grunt">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2018-03-16T09:52:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="发布grunt-cptpl插件">
<meta name="twitter:description" content="view on Github：https://github.com/hanan198501/grunt-cptplgrunt-cptpl插件可以将您的文本模板文件编译成javascript文件。在前端开发的时候，模板文本我们一般存放在一个隐藏dom节点，再通过javascript去获取这个节点的内容，将其编译。或者在写javascript的时候，我们手动通过拼接字符串的方式储存模板文本。grunt">
    
    <link rel="alternative" href="/atom.xml" title="安·记" type="application/rss+xm">
    
    
    <link rel="icon" href="/favicon.ico">
    
    <link href="/css/fonts/source-code-pro.woff2" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css">
    
<!--百度统计-->
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?3e1fabf44865ddfe8b31fa9d84cbe4c9";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <!--<div id="header-title" class="inner">-->
      <!--<h1 id="logo-wrap">-->
        <!--<a href="/" id="logo">安·记</a>-->
      <!--</h1>-->
      <!---->
    <!--</div>-->
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <h1 class="main-nav-link"><a href="/">安·记</a></h1>
        
          
          <a class="main-nav-link" href="/archives" target="">归档</a>
        
          
          <a class="main-nav-link" href="/categories" target="">分类</a>
        
          
          <a class="main-nav-link" href="/tags" target="">标签</a>
        
          
          <a class="main-nav-link" href="/links" target="">链接</a>
        
          
          <a class="main-nav-link" href="https://500px.com/annnhan" target="_blank">摄影</a>
        
          
          <a class="main-nav-link" href="/about" target="">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://annn.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-grunt-cptpl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/grunt-cptpl/" class="article-date">
  <time datetime="2014-03-15T23:25:43.000Z" itemprop="datePublished">2014-03-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categorie/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h2 class="article-title" itemprop="name">
      发布grunt-cptpl插件
    </h2>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="view-on-Github：https-github-com-hanan198501-grunt-cptpl"><a href="#view-on-Github：https-github-com-hanan198501-grunt-cptpl" class="headerlink" title="view on Github：https://github.com/hanan198501/grunt-cptpl"></a>view on Github：<a href="https://github.com/hanan198501/grunt-cptpl" target="_blank" rel="noopener">https://github.com/hanan198501/grunt-cptpl</a></h4><p>grunt-cptpl插件可以将您的文本模板文件编译成javascript文件。在前端开发的时候，模板文本我们一般存放在一个隐藏dom节点，再通过javascript去获取这个节点的内容，将其编译。或者在写javascript的时候，我们手动通过拼接字符串的方式储存模板文本。grunt-cptpl使前端开发也可以像后端一样，把模板文本存放在单独的文件中，使我们的开发工作从繁琐的dom操作和拼串中解放出来，提高我们的开发效率。最主要的，模板文件作为单独文件存放，可以使我们的项目代码逻辑更加清晰，更具可维护性。</p>
<h5 id="grunt-cptpl都做了啥？"><a href="#grunt-cptpl都做了啥？" class="headerlink" title="grunt-cptpl都做了啥？"></a>grunt-cptpl都做了啥？</h5><p>grunt-cptpl会读取每个模板文件的文本内容，用指定模板引擎的预编译方法将其包裹起来，生成一个新的javascript文件。这个javascript文件文件里面的内容，其实就是模板引擎的预编译方法调用，传入的参数为模板文件的文本内容。这样我们就有了一个编译好的模板函数，要渲染的时候把数据传给它就好了。</p>
<a id="more"></a>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>这个插件需要 Grunt ~0.4.4</p>
<p>如果你还没有使用过<a href="http://gruntjs.com/" target="_blank" rel="noopener">Grunt</a>, 务必阅读一下它的<a href="http://gruntjs.com/getting-started" target="_blank" rel="noopener">入门</a>指南, 里面介绍了如何创建一个<a href="http://gruntjs.com/sample-gruntfile" target="_blank" rel="noopener">Grunt配置文件</a>以及如何安装和使用grunt插件。一旦你熟悉这个过程，你可以使用如下命令安装grunt-cptpl。</p>
<pre><code>npm install grunt-cptpl --save-dev
</code></pre><p>一旦插件被安装， 可以在Gruntfile里面添加如下代码来启用：</p>
<pre><code>grunt.loadNpmTasks(&apos;grunt-cptpl&apos;);
</code></pre><h2 id="配置-“cptpl”-task"><a href="#配置-“cptpl”-task" class="headerlink" title="配置 “cptpl” task"></a>配置 “cptpl” task</h2><h3 id="概观"><a href="#概观" class="headerlink" title="概观"></a>概观</h3><p>在项目的Gruntfile文件中， 有一个grunt.initConfig()方法， 在里面添加一个<code>cptpl</code>数据对象。 options为目标任务的自定义选项，选填。 files为文件列表的输出目录和对应的原文件列表。如下面代码里， <code>[&#39;test/html/abc.html&#39;, &#39;test/html/abc2.html&#39;， &#39;mytemplate/*&#39;]</code> 为原文件列表， <code>&#39;tmp/&#39;</code> 为输出的目录，支持通配符 <code>*</code>。</p>
<pre><code>grunt.initConfig({
    cptpl: {
        your_target: {
            options: {
                // 任务特定的选项放在这里
            },
            files: {
                // 目标特定的文件列表放在这里
                &apos;tmp/&apos;: [&apos;test/html/abc.html&apos;, &apos;test/html/abc2.html&apos;， &apos;mytemplate/*&apos;]
            }

        },
    },
});
</code></pre><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><h4 id="options-banner"><a href="#options-banner" class="headerlink" title="options.banner"></a>options.banner</h4><p>Type: <code>String</code> ， Default value: <code>&#39;&#39;</code></p>
<p>在生成的javascript文件开头写入的文本信息，通常为一段javascript注释文字，如 <code>/*BANNER*/</code></p>
<h4 id="options-engine"><a href="#options-engine" class="headerlink" title="options.engine"></a>options.engine</h4><p>Type: <code>String</code> ， Default value: <code>&#39;handlebars&#39;</code></p>
<p>指定模板引擎，内置支持的模板引擎有（不区分大小写）： <code>&#39;arTtemplate&#39;</code> 、 <code>&#39;handlebars&#39;</code> 、 <code>&#39;hogan&#39;</code> 、 <code>&#39;underscore&#39;</code> 、 <code>&#39;juicer&#39;</code> 、 <code>&#39;dot&#39;</code> 、 <code>&#39;kissy&#39;</code> 、 <code>&#39;baidutemplate&#39;</code>。</p>
<p>Example： 运行下面cptpl任务，将会把 <code>test/html/</code> 目录下的 <code>abc.html</code> 编译成 <code>abc.js</code> ， 存放在 <code>tmp/</code> 目录。</p>
<pre><code>cptpl: {
    test: {
        options: {
            banner: &apos;/*BANNER*/\n&apos;,
            engine: &apos;dot&apos;
        },
        files: {
            &apos;tmp/&apos;: [&apos;test/html/abc.html&apos;]
        }
    }
}
</code></pre><p>其中<code>abc.html</code> 和 <code>abc.js</code> 的内容如下：</p>
<pre><code>//abc.html中的内容：
&lt;h1&gt;{*title*}&lt;/h1&gt;
&lt;p&gt;{*content*}&lt;/p&gt;


//编译后，abc.js中的内容：
/*BANNER*/
;window.abc = doT.template(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);
</code></pre><h4 id="options-context"><a href="#options-context" class="headerlink" title="options.context"></a>options.context</h4><p>Type: <code>String</code> ， Default value: <code>&#39;window&#39;</code></p>
<p>指定生成的javascript文件中编译好的模板函数的上下文对象， 如果此选项的值为 <code>&#39;{AMD}&#39;</code>，则把编译好的模板函数包装成一个AMD模块，如果此选项的值为 <code>&#39;{CMD}&#39;</code>， 则把编译好的模板函数包装成一个CMD模块。</p>
<p>Example：</p>
<pre><code>cptpl: {
    test: {
        options: {
            engine: &apos;dot&apos;,
            context: &apos;myObj&apos;
        },
        files: {
            &apos;tmp/&apos;: [&apos;test/html/abc.html&apos;]
        }
    }
}

// context: &apos;myObj&apos;
// abc.js ==&gt;
;myObj.abc = doT.template(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);


// context: &apos;{AMD}&apos;
// abc.js ==&gt;
;define(function() {
    return doT.template(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);
});


// context: &apos;{CMD}&apos;
// abc.js ==&gt;
;define(function(require, exports, module) {
    module.exports = doT.template(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);
});
</code></pre><h4 id="options-reName"><a href="#options-reName" class="headerlink" title="options.reName"></a>options.reName</h4><p>Type: <code>Function</code> ， Default value: <code>function (name) {return name;}</code></p>
<p>重命名方法，接受一个参数，参数值为源文件名， 此方法的返回值将作为生成的javascript文件名，以及模板函数挂载到的上下文对象属性名。</p>
<p>Example： 下面代码将生成的javascript文件名前面都加上 <code>__</code>， <code>abc.html</code> 将生成 <code>__abc.js</code>。</p>
<pre><code>cptpl: {
    test: {
        options: {
            engine: &apos;dot&apos;,
            reName: function (name) {
                return &apos;__&apos; + name;
            }
        },
        files: {
            &apos;tmp/&apos;: [&apos;test/html/abc.html&apos;]
        }
    }
}

// __abc.js ==&gt;
;window.__abc = doT.template(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);
</code></pre><h4 id="options-customEngines"><a href="#options-customEngines" class="headerlink" title="options.customEngines"></a>options.customEngines</h4><p>Type: <code>Object</code> ， Default value: <code>{}</code></p>
<p>自定义模板引擎预编译包裹方法。如果内置模板引擎无法满足您，可以通过此选项设置一个你需要的模板引擎预编译包裹方法。格式为 <code>{name: function(t){*}</code>， <code>name</code>为模板引擎名， 对应的<code>function(t){}</code>就是包裹方法，接受一个参数t， t为模板文件的文本内容， 您可以拼成用编译函数包裹起来的js代码，并把包裹后的结果作为函数返回值。</p>
<p>Example：</p>
<pre><code>cptpl: {
    test: {
        options: {
            engine: &apos;myEngine&apos;,
            customEngines: {
                myEngine: function (t) {
                    return &apos;myEngine.compile(&apos; + t + &apos;);&apos;
                }
            }
        },
        files: {
            &apos;tmp/&apos;: [&apos;test/html/abc.html&apos;]
        }
    }
}

// abc.js ==&gt;
;window.abc = myEngine.compile(&apos;&lt;h1&gt;{*title*}&lt;/h1&gt;&lt;p&gt;{*content*}&lt;/p&gt;&apos;);
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://annn.me/grunt-cptpl/" data-id="cjetrn8qg002vz1f5tf2wmcpw" data-title="发布grunt-cptpl插件" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/grunt/">grunt</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/webstorm8/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          WebStorm 8 新功能一览
        
      </div>
    </a>
  
  
    <a href="/popup-mask-ie6-bug/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">popup组件中mask层的IE6 bug和兼容办法</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <div id="comments-containet"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    owner: 'annnhan',
    repo: window.githubRepository || 'gitment',
    oauth: {
      client_id: '0a05c848f85cc4fdc815',
      client_secret: '6bfdb7c41012f8b3d28935e7e08b8e6c1504a325',
    },
  })
  gitment.render('comments-containet')
</script>
  </div>
</section>
</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 阿安<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/categories" class="mobile-nav-link">分类</a>
  
    <a href="/tags" class="mobile-nav-link">标签</a>
  
    <a href="/links" class="mobile-nav-link">链接</a>
  
    <a href="https://500px.com/annnhan" class="mobile-nav-link">摄影</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>-->

<script src="/js/libs/jquery.2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>